"use strict";(self.webpackChunkvendors=self.webpackChunkvendors||[]).push([[795],{9875:(_,h,o)=>{o.d(h,{q:()=>H});var p=o(2100),t=o(4438),j=o(9602),c=o(5779),l=o(5534),x=o(7172),f=o(4262),G=o(4464),T=o(111);let v=(()=>{class n extends G.G{constructor(e){super(e),this.productUrl=T.c.apiUrl+"product"}getProducts(){return this.get(this.productUrl)}addProduct(e){return this.post(this.productUrl+"/add",e)}updateProduct(e){return this.put(`${this.productUrl}/${e.id}`,e)}deleteProduct(e){return this.delete(`${this.productUrl}/${e}`)}static#t=this.\u0275fac=function(r){return new(r||n)(t.KVO(t.zZn))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F=o(991),m=o(177),C=o(1141),R=o(2242),I=o(8150),g=o(4341),y=o(1142),S=o(7480),P=o(9998),M=o(4799),b=o(8409);const N=()=>({height:"320px"});function a(n,d){if(1&n){const e=t.RV6();t.j41(0,"p-button",14),t.bIt("onClick",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.deleteConfirmation())}),t.k0s()}2&n&&t.Y8G("text",!0)}function V(n,d){if(1&n){const e=t.RV6();t.j41(0,"p-button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.save())}),t.k0s()}}function D(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"label",2),t.EFF(2,"Name"),t.k0s(),t.j41(3,"input",3),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.product.name,i)||(s.product.name=i),t.Njj(i)}),t.k0s(),t.j41(4,"div",4)(5,"label",2),t.EFF(6,"Description"),t.k0s(),t.j41(7,"p-editor",5),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.product.description,i)||(s.product.description=i),t.Njj(i)}),t.k0s()(),t.j41(8,"div",6)(9,"div")(10,"label",2),t.EFF(11,"Min Guest Limit"),t.k0s(),t.j41(12,"p-inputNumber",7),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.product.minGuestLimit,i)||(s.product.minGuestLimit=i),t.Njj(i)}),t.k0s()(),t.j41(13,"div")(14,"label",2),t.EFF(15,"Max Guest List"),t.k0s(),t.j41(16,"p-inputNumber",7),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.product.maxGuestLimit,i)||(s.product.maxGuestLimit=i),t.Njj(i)}),t.k0s()()(),t.j41(17,"label",2),t.EFF(18,"Price"),t.k0s(),t.j41(19,"p-inputNumber",7),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.product.price,i)||(s.product.price=i),t.Njj(i)}),t.k0s(),t.j41(20,"div",4)(21,"label",2),t.EFF(22,"Price Type"),t.k0s(),t.j41(23,"p-dropdown",8),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.onPriceTypeChanged(i))}),t.k0s()(),t.j41(24,"div",9),t.DNE(25,a,1,1,"p-button",10),t.j41(26,"p-button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.close())}),t.k0s(),t.DNE(27,V,1,0,"p-button",12),t.nrm(28,"app-loading",13),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.product.name),t.R7$(4),t.Aen(t.lJ4(12,N)),t.R50("ngModel",e.product.description),t.R7$(5),t.R50("ngModel",e.product.minGuestLimit),t.R7$(4),t.R50("ngModel",e.product.maxGuestLimit),t.R7$(3),t.R50("ngModel",e.product.price),t.R7$(4),t.Y8G("options",e.priceTypeOptions)("ngModel",e.product.priceType),t.R7$(2),t.Y8G("ngIf",e.product.id),t.R7$(2),t.Y8G("ngIf",!e.loading),t.R7$(),t.Y8G("showLoading",e.loading)}}let u=(()=>{class n{constructor(e,r,i,s,z,J){this.dialogConfig=e,this.productService=r,this.ref=i,this.messageService=s,this.confirmationService=z,this.auth=J,this.product={description:"",id:void 0,isDeleted:!1,maxGuestLimit:0,minGuestLimit:0,name:"",storeId:"",packageProducts:void 0,eventProducts:void 0,price:0,priceType:x.S.FLAT},this.onClose=new t.bkB,this.loading=!1,this.priceTypeOptions=f.k,e&&e.data&&(this.product=e.data)}ngOnInit(){""===this.product.storeId&&this.auth.current&&this.auth.current.storeId&&(this.product.storeId=this.auth.current.storeId)}save(){this.loading=!0,this.product.id?this.productService.updateProduct(this.product).subscribe({next:()=>{this.confirmation("Product updated")},error:e=>{this.confirmation("Failed to update product",e.message)}}):this.productService.addProduct(this.product).subscribe({next:()=>{this.confirmation("Product added")},error:e=>{this.confirmation("Failed to add product",e.message)}})}confirmation(e,r){this.loading=!1,r?this.messageService.add((0,l.T)(l.P.ERROR,e+r)):this.close((0,l.T)(l.P.SUCCESS,e))}close(e){this.ref.close(e)}onPriceTypeChanged(e){this.product.priceType=e.key}delete(){this.loading=!0,this.productService.deleteProduct(this.product.id).subscribe({next:()=>{this.confirmation("product deleted")},error:e=>{this.confirmation("failed to delete product",e.message)}})}deleteConfirmation(){this.confirmationService.confirm({message:"Are you sure that you want to delete this product?",icon:"pi pi-exclamation-triangle",acceptIcon:"pi pi-times",rejectIcon:"none",acceptLabel:"Delete",rejectLabel:"Cancel",accept:()=>this.delete()})}static#t=this.\u0275fac=function(r){return new(r||n)(t.rXU(p.sb),t.rXU(v),t.rXU(p.Pw),t.rXU(c.bg),t.rXU(c.td),t.rXU(F.V))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-add-product-form"]],outputs:{onClose:"onClose"},features:[t.Jv_([j.Pe,c.bg,c.td])],decls:3,vars:1,consts:[["class","w-full",4,"ngIf"],[1,"w-full"],[1,"block","text-900","font-medium","mb-2"],["type","text","pInputText","",1,"w-full","mb-3",3,"ngModelChange","ngModel"],[1,"w-full","mb-3"],[3,"ngModelChange","ngModel"],[1,"lg:flex","gap-3"],["inputId","integeronly",1,"w-full","mb-3",3,"ngModelChange","ngModel"],["optionLabel","value",1,"w-full","mb-3",3,"ngModelChange","options","ngModel"],[1,"flex","justify-content-end","gap-3","mt-2"],["icon","pi pi-trash","severity","danger",3,"text","onClick",4,"ngIf"],["icon","pi pi-times","label","cancel",3,"click"],["icon","pi pi-check","label","Save","styleClass","p-button-success",3,"click",4,"ngIf"],[3,"showLoading"],["icon","pi pi-trash","severity","danger",3,"onClick","text"],["icon","pi pi-check","label","Save","styleClass","p-button-success",3,"click"]],template:function(r,i){1&r&&(t.DNE(0,D,29,13,"div",0),t.nrm(1,"p-toast")(2,"p-confirmDialog")),2&r&&t.Y8G("ngIf",i.product)},dependencies:[m.bT,C.$n,R.S,I.ms,g.me,g.BC,g.vS,y.KE,S.YI,P.y8,M.T,b.q]})}return n})();var X=o(577),E=o(9903);const A=()=>({"min-width":"50rem"});function L(n,d){if(1&n&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&n){const e=d.$implicit;t.R7$(),t.SpI(" ",e.key," ")}}function U(n,d){if(1&n&&(t.j41(0,"tr"),t.DNE(1,L,2,1,"th",10),t.k0s()),2&n){const e=d.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function $(n,d){if(1&n&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&n){const e=d.$implicit,r=t.XpG().$implicit,i=t.XpG(3);t.R7$(),t.SpI(" ",e.key===i.ProductColumnNames.PRICE_TYPE?i.getPriceTypeCellData(r[e.value]):r[e.value]," ")}}function B(n,d){if(1&n&&(t.j41(0,"tr",11),t.DNE(1,$,2,1,"td",10),t.k0s()),2&n){const r=d.columns;t.Y8G("pSelectableRow",d.$implicit),t.R7$(),t.Y8G("ngForOf",r)}}function Y(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",6)(1,"p-table",7),t.bIt("onRowSelect",function(i){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onRowSelect(i))}),t.DNE(2,U,2,1,"ng-template",8)(3,B,2,2,"ng-template",9),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("columns",e.productColumns)("value",e.products)("tableStyle",t.lJ4(3,A))}}function k(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createProduct())}),t.k0s(),t.DNE(3,Y,4,4,"div",5),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",e.products&&e.products.length>0)}}function O(n,d){if(1&n&&(t.j41(0,"div",12),t.nrm(1,"app-loading",13),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("showLoading",e.loading)}}let H=(()=>{class n{constructor(e,r,i){this.productsService=e,this.dialogService=r,this.messageService=i,this.loading=!0,this.ref=new p.Pw,this.ProductColumnNames=X.q,this.productColumns=X.E,this.getPriceTypeCellData=f.K}ngOnInit(){this.updateData()}createProduct(){this.ref=this.dialogService.open(u,{header:"New product",width:"50rem",maximizable:!0}),this.onCloseSubscribe()}onRowSelect(e){this.ref=this.dialogService.open(u,{header:"Edit: "+e.data.name,data:e.data,width:"50rem",maximizable:!0}),this.onCloseSubscribe()}onCloseSubscribe(){this.ref.onClose.subscribe(e=>{e&&(this.messageService.add(e),this.updateData())})}updateData(){this.loading=!0,this.productsService.getProducts().subscribe({next:e=>{this.loading=!1,this.products=e},error:e=>this.messageService.add((0,l.T)(l.P.ERROR,e.message))})}static#t=this.\u0275fac=function(r){return new(r||n)(t.rXU(v),t.rXU(p.o3),t.rXU(c.bg))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-products"]],features:[t.Jv_([p.o3,c.bg])],decls:3,vars:2,consts:[["class","grid",4,"ngIf"],["class","flex justify-content-center",4,"ngIf"],[1,"grid"],[1,"col-12"],["pButton","","pRipple","","label","Add","icon","pi pi-plus",1,"mb-3",3,"click"],["class","card",4,"ngIf"],[1,"card"],["selectionMode","single","p-datatable-striped","",3,"onRowSelect","columns","value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[3,"pSelectableRow"],[1,"flex","justify-content-center"],[3,"showLoading"]],template:function(r,i){1&r&&(t.DNE(0,k,4,1,"div",0),t.nrm(1,"p-toast"),t.DNE(2,O,2,1,"div",1)),2&r&&(t.Y8G("ngIf",!i.loading),t.R7$(2),t.Y8G("ngIf",i.loading))},dependencies:[m.Sq,m.bT,C._f,c.Ei,E.XI,E.d5,P.y8,b.q]})}return n})()},795:(_,h,o)=>{o.r(h),o.d(h,{ProductsModule:()=>N});var p=o(177),t=o(6348),j=o(9875),c=o(4438);let l=(()=>{class a{static#t=this.\u0275fac=function(u){return new(u||a)};static#e=this.\u0275mod=c.$C({type:a});static#o=this.\u0275inj=c.G2t({imports:[t.iI.forChild([{path:"",component:j.q}]),t.iI]})}return a})();var x=o(1141),f=o(2242),G=o(9903),T=o(6296),v=o(8150),F=o(9266),m=o(1579),C=o(4341),R=o(1142),I=o(7480),g=o(1305),y=o(5430),S=o(1631),P=o(9998),M=o(4799),b=o(5193);let N=(()=>{class a{static#t=this.\u0275fac=function(u){return new(u||a)};static#e=this.\u0275mod=c.$C({type:a});static#o=this.\u0275inj=c.G2t({imports:[p.MD,l,x.tm,f.u,G.bG,T.iV,v.kr,F.SW,m.d,C.YN,R.sv,I.O3,g.f,y.q4,S.H_,P.MB,M.F,b.H]})}return a})()}}]);