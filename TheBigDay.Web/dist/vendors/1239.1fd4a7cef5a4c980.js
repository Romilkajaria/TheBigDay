"use strict";(self.webpackChunkvendors=self.webpackChunkvendors||[]).push([[1239],{2606:(et,f,c)=>{c.r(f),c.d(f,{ProductsModule:()=>q});var a=c(6814),v=c(2129),p=c(5118),t=c(4769),y=c(1498),s=c(5219),l=c(161),F=c(3428),_=c(3091),J=c(314),S=c(2002);let x=(()=>{class o extends J.H{constructor(e){super(e),this.productUrl=S.N.apiUrl+"product"}getProducts(){return this.get(this.productUrl)}addProduct(e){return this.post(this.productUrl,e)}updateProduct(e){return this.put(`${this.productUrl}/${e.id}`,e)}deleteProduct(e){return this.delete(`${this.productUrl}/${e}`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(t.zs3))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var m=c(707),C=c(3714),T=c(3965),u=c(95),P=c(6860),Z=c(5167),g=c(4104),b=c(3904),A=c(6907);function w(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",14),t.NdJ("onClick",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteConfirmation())}),t.qZA()}2&o&&t.Q6J("text",!0)}function I(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.save())}),t.qZA()}}const Y=function(){return{height:"320px"}};function G(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"label",2),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.name=i)}),t.qZA(),t.TgZ(4,"div",4)(5,"label",2),t._uU(6,"Description"),t.qZA(),t.TgZ(7,"p-editor",5),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.description=i)}),t.qZA()(),t.TgZ(8,"div",6)(9,"div")(10,"label",2),t._uU(11,"Min Guest Limit"),t.qZA(),t.TgZ(12,"p-inputNumber",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.minGuestLimit=i)}),t.qZA()(),t.TgZ(13,"div")(14,"label",2),t._uU(15,"Max Guest List"),t.qZA(),t.TgZ(16,"p-inputNumber",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.maxGuestLimit=i)}),t.qZA()()(),t.TgZ(17,"label",2),t._uU(18,"Price"),t.qZA(),t.TgZ(19,"p-inputNumber",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.price=i)}),t.qZA(),t.TgZ(20,"div",4)(21,"label",2),t._uU(22,"Price Type"),t.qZA(),t.TgZ(23,"p-dropdown",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.onPriceTypeChanged(i))}),t.qZA()(),t.TgZ(24,"div",9),t.YNc(25,w,1,1,"p-button",10),t.TgZ(26,"p-button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.close())}),t.qZA(),t.YNc(27,I,1,0,"p-button",12),t._UZ(28,"app-loading",13),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.product.name),t.xp6(4),t.Akn(t.DdM(12,Y)),t.Q6J("ngModel",e.product.description),t.xp6(5),t.Q6J("ngModel",e.product.minGuestLimit),t.xp6(4),t.Q6J("ngModel",e.product.maxGuestLimit),t.xp6(3),t.Q6J("ngModel",e.product.price),t.xp6(4),t.Q6J("options",e.priceTypeOptions)("ngModel",e.product.priceType),t.xp6(2),t.Q6J("ngIf",e.product.id),t.xp6(2),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("showLoading",e.loading)}}let M=(()=>{class o{constructor(e,n,i,d,tt){this.dialogConfig=e,this.productService=n,this.ref=i,this.messageService=d,this.confirmationService=tt,this.product={description:"",id:void 0,isDeleted:!1,maxGuestLimit:0,minGuestLimit:0,name:"",vendorID:"ede035de-9173-48f4-2823-08dc0305740f",packageProducts:void 0,eventProducts:void 0,price:0,priceType:F.F.FLAT},this.onClose=new t.vpe,this.loading=!1,this.priceTypeOptions=_.k,e&&e.data&&(this.product=e.data)}save(){this.loading=!0,this.product.id?this.productService.updateProduct(this.product).subscribe({next:()=>{this.confirmation("Product updated")},error:e=>{this.confirmation("Failed to update product",e.message)}}):this.productService.addProduct(this.product).subscribe({next:()=>{this.confirmation("Product added")},error:e=>{this.confirmation("Failed to add product",e.message)}})}confirmation(e,n){this.loading=!1,n?this.messageService.add((0,l.d)(l.N.ERROR,e+n)):this.close((0,l.d)(l.N.SUCCESS,e))}close(e){this.ref.close(e)}onPriceTypeChanged(e){this.product.priceType=e.key}delete(){this.loading=!0,this.productService.deleteProduct(this.product.id).subscribe({next:()=>{this.confirmation("product deleted")},error:e=>{this.confirmation("failed to delete product",e.message)}})}deleteConfirmation(){this.confirmationService.confirm({message:"Are you sure that you want to delete this product?",icon:"pi pi-exclamation-triangle",acceptIcon:"pi pi-times",rejectIcon:"none",acceptLabel:"Delete",rejectLabel:"Cancel",accept:()=>this.delete()})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(p.S),t.Y36(x),t.Y36(p.E7),t.Y36(s.ez),t.Y36(s.YP))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-product-form"]],outputs:{onClose:"onClose"},features:[t._Bn([y.ib,s.ez,s.YP])],decls:3,vars:1,consts:[["class","w-full",4,"ngIf"],[1,"w-full"],[1,"block","text-900","font-medium","mb-2"],["type","text","pInputText","",1,"w-full","mb-3",3,"ngModel","ngModelChange"],[1,"w-full","mb-3"],[3,"ngModel","ngModelChange"],[1,"lg:flex","gap-3"],["inputId","integeronly",1,"w-full","mb-3",3,"ngModel","ngModelChange"],["optionLabel","value",1,"w-full","mb-3",3,"options","ngModel","ngModelChange"],[1,"flex","justify-content-end","gap-3","mt-2"],["icon","pi pi-trash","severity","danger",3,"text","onClick",4,"ngIf"],["icon","pi pi-times","label","cancel",3,"click"],["icon","pi pi-check","label","Save","styleClass","p-button-success",3,"click",4,"ngIf"],[3,"showLoading"],["icon","pi pi-trash","severity","danger",3,"text","onClick"],["icon","pi pi-check","label","Save","styleClass","p-button-success",3,"click"]],template:function(n,i){1&n&&(t.YNc(0,G,29,13,"div",0),t._UZ(1,"p-toast")(2,"p-confirmDialog")),2&n&&t.Q6J("ngIf",i.product)},dependencies:[a.O5,m.zx,C.o,T.Lt,u.Fj,u.JJ,u.On,P.ML,Z.Rn,g.FN,b.Q,A.N]})}return o})();var N=c(6412),h=c(9232);function L(o,r){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.key," ")}}function Q(o,r){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,L,2,1,"th",10),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function U(o,r){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=r.$implicit,n=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.hij(" ",e.key===i.ProductColumnNames.PRICE_TYPE?i.getPriceTypeCellData(n[e.value]):n[e.value]," ")}}function R(o,r){if(1&o&&(t.TgZ(0,"tr",11),t.YNc(1,U,2,1,"td",10),t.qZA()),2&o){const n=r.columns;t.Q6J("pSelectableRow",r.$implicit),t.xp6(1),t.Q6J("ngForOf",n)}}const D=function(){return{"min-width":"50rem"}};function E(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"p-table",7),t.NdJ("onRowSelect",function(i){t.CHM(e);const d=t.oxw(2);return t.KtG(d.onRowSelect(i))}),t.YNc(2,Q,2,1,"ng-template",8),t.YNc(3,R,2,2,"ng-template",9),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("columns",e.productColumns)("value",e.products)("tableStyle",t.DdM(3,D))}}function H(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createProduct())}),t.qZA(),t.YNc(3,E,4,4,"div",5),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.products&&e.products.length>0)}}function j(o,r){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"app-loading",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("showLoading",e.loading)}}let z=(()=>{class o{constructor(e,n,i){this.productsService=e,this.dialogService=n,this.messageService=i,this.loading=!0,this.ref=new p.E7,this.ProductColumnNames=N.$,this.productColumns=N.C,this.getPriceTypeCellData=_.c}ngOnInit(){this.updateData()}createProduct(){this.ref=this.dialogService.open(M,{header:"New product",width:"50rem",maximizable:!0}),this.onCloseSubscribe()}onRowSelect(e){this.ref=this.dialogService.open(M,{header:"Edit: "+e.data.name,data:e.data,width:"50rem",maximizable:!0}),this.onCloseSubscribe()}onCloseSubscribe(){this.ref.onClose.subscribe(e=>{e&&(this.messageService.add(e),this.updateData())})}updateData(){this.loading=!0,this.productsService.getProducts().subscribe({next:e=>{this.loading=!1,this.products=e},error:e=>this.messageService.add((0,l.d)(l.N.ERROR,e.message))})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(x),t.Y36(p.xA),t.Y36(s.ez))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],features:[t._Bn([p.xA,s.ez])],decls:3,vars:2,consts:[["class","grid",4,"ngIf"],["class","flex justify-content-center",4,"ngIf"],[1,"grid"],[1,"col-12"],["pButton","","pRipple","","label","Add","icon","pi pi-plus",1,"mb-3",3,"click"],["class","card",4,"ngIf"],[1,"card"],["selectionMode","single","p-datatable-striped","",3,"columns","value","tableStyle","onRowSelect"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[3,"pSelectableRow"],[1,"flex","justify-content-center"],[3,"showLoading"]],template:function(n,i){1&n&&(t.YNc(0,H,4,1,"div",0),t._UZ(1,"p-toast"),t.YNc(2,j,2,1,"div",1)),2&n&&(t.Q6J("ngIf",!i.loading),t.xp6(2),t.Q6J("ngIf",i.loading))},dependencies:[a.sg,a.O5,m.Hq,s.jx,h.iA,h.Ei,g.FN,A.N]})}return o})(),K=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[v.Bz.forChild([{path:"",component:z}]),v.Bz]})}return o})();var O=c(4055),$=c(7902),B=c(6651),X=c(6218),V=c(8057),W=c(5609),k=c(6741);let q=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez,K,m.hJ,C.j,h.U$,O.q4,T.kW,$.JH,B.q,u.u5,P.Z_,Z.L$,X.A,V.nD,W.Iu,g.EV,b.D,k.I]})}return o})()}}]);