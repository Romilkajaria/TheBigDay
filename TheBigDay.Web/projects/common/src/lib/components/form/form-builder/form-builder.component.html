<div *ngIf="form">
<p>{{form.description}}</p>
    <div *ngIf="form.subForms && form.subForms.length > 0">
        <ng-container *ngIf="!currentSubForm">
            <p>There are {{form.subForms.length}} steps to complete on this form.
                Please read the questions carefully and be accurate as possible when answering</p>
            <p>{{form.description}}</p>
            <ul>
                <li *ngFor="let subform of form.subForms">{{subform.name}}</li>
            </ul>
        </ng-container>
        <ng-container *ngIf="currentSubForm">
            <p>{{currentSubForm.description}}</p>
            <div *ngFor="let field of currentSubForm.fields" class="flex flex-column gap-1">
                <div>
                    <label class="block text-900 text-xl font-medium mb-2">{{field.label}}</label>
                    <ng-container [ngSwitch]="field.type">
                        <ng-container *ngSwitchCase="FieldType.STRING">
                            <input type="text" [placeholder]="field.placeholder" [required]="field.required" pInputText class="w-full mb-5" style="padding:1rem">
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.INT32">
                            <input type="number" [placeholder]="field.placeholder" [required]="field.required" pInputText class="w-full mb-5" style="padding:1rem"/>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.INT64">
                            <input type="number" [placeholder]="field.placeholder" [required]="field.required" pInputText class="w-full mb-5" style="padding:1rem">
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.RICH_TEXT">
                            <p-editor [placeholder]="field.placeholder" [style]="{ height: '320px' }" class="w-full mb-5"></p-editor>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.DATE_PICKER">
                            <div class="flex-auto p-fluid mb-5">
                                <p-calendar [required]="field.required" [iconDisplay]="'input'" [showIcon]="true"></p-calendar>
                            </div>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.COLOR_PICKER">
                            <p-colorPicker class="mb-5"/>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.CHECKBOX">
                            <p-checkbox class="mb-5"/>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.RADIO">
                            <div class="radio-grid">
                                <div *ngFor="let radioValue of ListHelpers.mapToList(field.options)" class="field-checkbox">
                                    <p-radioButton
                                        [inputId]="radioValue"
                                        [value]="radioValue"
                                    [(ngModel)]="testRadioValue"/>
                                    <label [for]="radioValue" class="ml-2">
                                        {{ radioValue }}
                                    </label>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.EMAIL">
                            <input type="email" [placeholder]="field.placeholder" [required]="field.required" pInputText class="w-full mb-5" style="padding:1rem">
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.FILE_UPLOAD">
                            <input type="file" [placeholder]="field.placeholder" [required]="field.required" pInputText class="w-full mb-5" style="padding:1rem">
                        </ng-container>
                        <ng-container *ngSwitchCase="FieldType.DROPDOWN">
                            <p-dropdown [options]="ListHelpers.mapToList(field.options)" [placeholder]="field.placeholder"/>
                            </ng-container>
                        <ng-container *ngSwitchCase="FieldType.DROPDOWN_MULTISELECT">
                            <p-multiSelect [style]="{'width':'100%'}" class="w-full mb-5" [options]="ListHelpers.mapToList(field.options)" [placeholder]="field.placeholder"/>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
        </ng-container>

        <div class="flex align-items-center justify-content-between">
            <button *ngIf="currentSubForm" class="me-2" pButton pRipple label="Previous" (click)="previousSubForm()"></button>
            <button *ngIf="!isOnLastStep(currentSubForm?.id)" class="me-2" pButton pRipple label="Next" (click)="nextSubForm()"></button>
            <button *ngIf="isOnLastStep(currentSubForm?.id)" class="me-2" pButton pRipple label="Finish" (click)="close()"></button>
        </div>
    </div>
</div>
